{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        queYiMen:null,\r\n        tips:[],\r\n        selected:[],\r\n        dingques:[],\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        this.initView();\r\n        this.initDingQue();\r\n        this.initEventHandlers();\r\n    },\r\n    \r\n    initView:function(){\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        this.queYiMen = gameChild.getChildByName(\"dingque\");\r\n        this.queYiMen.active = cc.vv.gameNetMgr.isDingQueing;\r\n        \r\n        var arr = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < arr.length; ++i){\r\n            var side = gameChild.getChildByName(arr[i]);\r\n            var seat = side.getChildByName(\"seat\");\r\n            var dingque = seat.getChildByName(\"que\");\r\n            this.dingques.push(dingque);\r\n        }\r\n        this.reset();\r\n        \r\n        var tips = this.queYiMen.getChildByName(\"tips\");\r\n        for(var i = 0; i < tips.childrenCount; ++i){\r\n            var n = tips.children[i];\r\n            this.tips.push(n.getComponent(cc.Label));\r\n        }\r\n        \r\n        if(cc.vv.gameNetMgr.gamestate == \"dingque\"){\r\n            this.showDingQueChoice();\r\n        }\r\n    },\r\n    \r\n    initEventHandlers:function(){\r\n        var self = this;\r\n        \r\n        this.node.on('game_dingque_notify',function(data){\r\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(data.detail);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            console.log(\"game_dingque_notify:\" + localIndex);\r\n            self.tips[localIndex].node.active = true;\r\n        });\r\n        \r\n        this.node.on('game_dingque_finish',function(){\r\n            //通知每一个玩家定缺的花色\r\n            self.queYiMen.active = false;\r\n            cc.vv.gameNetMgr.isDingQueing = false;\r\n            self.initDingQue();\r\n        });\r\n    },\r\n    \r\n    showDingQueChoice:function(){\r\n        this.queYiMen.active = true;\r\n        var sd = cc.vv.gameNetMgr.getSelfData();\r\n        var typeCounts = [0,0,0];\r\n        for(var i = 0; i < sd.holds.length; ++i){\r\n            var pai = sd.holds[i];\r\n            var type = cc.vv.mahjongmgr.getMahjongType(pai);\r\n            typeCounts[type]++;\r\n        }\r\n        \r\n        var min = 65535;\r\n        var minIndex = 0;\r\n        for(var i = 0; i < typeCounts.length; ++i){\r\n            if(typeCounts[i] < min){\r\n                min = typeCounts[i];\r\n                minIndex = i;\r\n            }\r\n        }\r\n        \r\n        var arr = [\"tong\",\"tiao\",\"wan\"];\r\n        for(var i = 0; i < arr.length; ++i){\r\n            var node = this.queYiMen.getChildByName(arr[i]);\r\n            if(minIndex == i){\r\n                node.getComponent(cc.Animation).play(\"dingque_tuijian\");\r\n            }\r\n            else{\r\n                node.getComponent(cc.Animation).stop();\r\n            }\r\n            //this.queYiMen.getChildByName(arr[i]).getChildByName('jian').active = minIndex == i;    \r\n        }\r\n        \r\n        this.reset();\r\n        for(var i = 0; i < this.tips.length; ++i){\r\n            var n = this.tips[i];\r\n            if(i > 0){\r\n                n.node.active = false;                \r\n            }\r\n            else{\r\n                n.node.active = true;\r\n            }\r\n        }\r\n    },\r\n    \r\n    initDingQue:function(){\r\n        var arr = [\"tong\",\"tiao\",\"wan\"];\r\n        var data = cc.vv.gameNetMgr.seats;\r\n        for(var i = 0; i < data.length; ++i){\r\n            var que = data[i].dingque;\r\n            if(que == null || que < 0 || que >= arr.length){\r\n                que = null;\r\n            }\r\n            else{\r\n                que = arr[que]; \r\n            }\r\n            \r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if(que){\r\n                this.dingques[localIndex].getChildByName(que).active = true;    \r\n            }\r\n        }\r\n    },\r\n    \r\n    reset:function(){\r\n        this.setInteractable(true);\r\n        \r\n        this.selected.push(this.queYiMen.getChildByName(\"tong_selected\"));\r\n        this.selected.push(this.queYiMen.getChildByName(\"tiao_selected\"));\r\n        this.selected.push(this.queYiMen.getChildByName(\"wan_selected\"));\r\n        for(var i = 0; i < this.selected.length; ++i){\r\n            this.selected[i].active = false;\r\n        }        \r\n        \r\n        for(var i = 0; i < this.dingques.length; ++i){\r\n            for(var j = 0; j < this.dingques[i].children.length; ++j){\r\n                this.dingques[i].children[j].active = false;    \r\n            }\r\n        }\r\n    },\r\n    \r\n    onQueYiMenClicked:function(event){\r\n        var type = 0;\r\n        if(event.target.name == \"tong\"){\r\n            type = 0;\r\n        }\r\n        else if(event.target.name == \"tiao\"){\r\n            type = 1;\r\n        }\r\n        else if(event.target.name == \"wan\"){\r\n            type = 2;\r\n        }\r\n        \r\n        for(var i = 0; i < this.selected.length; ++i){\r\n            this.selected[i].active = false;\r\n        }  \r\n        this.selected[type].active = true;\r\n        cc.vv.gameNetMgr.dingque = type;\r\n        cc.vv.net.send(\"dingque\",type);\r\n        \r\n        //this.setInteractable(false);\r\n    },\r\n    \r\n    setInteractable:function(value){\r\n        this.queYiMen.getChildByName(\"tong\").getComponent(cc.Button).interactable = value;\r\n        this.queYiMen.getChildByName(\"tiao\").getComponent(cc.Button).interactable = value;\r\n        this.queYiMen.getChildByName(\"wan\").getComponent(cc.Button).interactable = value;        \r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}